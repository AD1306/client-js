window.FHIR=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=67)}([function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,r){(function(t){var r=function(e){return e&&e.Math==Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof t&&t)||Function("return this")()}).call(this,r(40))},function(e,t,r){var n=r(4);e.exports=function(e){if(!n(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t,r){var n=r(1),o=r(48),i=r(7),s=r(49),a=r(53),c=r(82),u=o("wks"),f=n.Symbol,l=c?f:s;e.exports=function(e){return i(u,e)||(a&&i(f,e)?u[e]=f[e]:u[e]=l("Symbol."+e)),u[e]}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,r){var n=r(0);e.exports=!n((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t,r){var n=r(5),o=r(42),i=r(2),s=r(17),a=Object.defineProperty;t.f=n?a:function(e,t,r){if(i(e),t=s(t,!0),i(r),o)try{return a(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},function(e,t,r){var n=r(14),o=Math.min;e.exports=function(e){return e>0?o(n(e),9007199254740991):0}},function(e,t,r){var n=r(1),o=r(21).f,i=r(12),s=r(13),a=r(24),c=r(77),u=r(28);e.exports=function(e,t){var r,f,l,h,p,d=e.target,g=e.global,y=e.stat;if(r=g?n:y?n[d]||a(d,{}):(n[d]||{}).prototype)for(f in t){if(h=t[f],l=e.noTargetGet?(p=o(r,f))&&p.value:r[f],!u(g?f:d+(y?".":"#")+f,e.forced)&&void 0!==l){if(typeof h==typeof l)continue;c(h,l)}(e.sham||l&&l.sham)&&i(h,"sham",!0),s(r,f,h,e)}}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t,r){var n=r(5),o=r(8),i=r(22);e.exports=n?function(e,t,r){return o.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t,r){var n=r(1),o=r(12),i=r(7),s=r(24),a=r(44),c=r(46),u=c.get,f=c.enforce,l=String(String).split("String");(e.exports=function(e,t,r,a){var c=!!a&&!!a.unsafe,u=!!a&&!!a.enumerable,h=!!a&&!!a.noTargetGet;"function"==typeof r&&("string"!=typeof t||i(r,"name")||o(r,"name",t),f(r).source=l.join("string"==typeof t?t:"")),e!==n?(c?!h&&e[t]&&(u=!0):delete e[t],u?e[t]=r:o(e,t,r)):u?e[t]=r:s(t,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&u(this).source||a(this)}))},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t,r){var n=r(6);e.exports=function(e){return Object(n(e))}},function(e,t,r){var n=r(23),o=r(6);e.exports=function(e){return n(o(e))}},function(e,t,r){var n=r(4);e.exports=function(e,t){if(!n(e))return e;var r,o;if(t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;if("function"==typeof(r=e.valueOf)&&!n(o=r.call(e)))return o;if(!t&&"function"==typeof(r=e.toString)&&!n(o=r.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,r){var n=r(79),o=r(1),i=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?i(n[e])||i(o[e]):n[e]&&n[e][t]||o[e]&&o[e][t]}},function(e,t,r){"use strict";var n,o,i=r(31),s=r(59),a=RegExp.prototype.exec,c=String.prototype.replace,u=a,f=(n=/a/,o=/b*/g,a.call(n,"a"),a.call(o,"a"),0!==n.lastIndex||0!==o.lastIndex),l=s.UNSUPPORTED_Y||s.BROKEN_CARET,h=void 0!==/()??/.exec("")[1];(f||h||l)&&(u=function(e){var t,r,n,o,s=this,u=l&&s.sticky,p=i.call(s),d=s.source,g=0,y=e;return u&&(-1===(p=p.replace("y","")).indexOf("g")&&(p+="g"),y=String(e).slice(s.lastIndex),s.lastIndex>0&&(!s.multiline||s.multiline&&"\n"!==e[s.lastIndex-1])&&(d="(?: "+d+")",y=" "+y,g++),r=new RegExp("^(?:"+d+")",p)),h&&(r=new RegExp("^"+d+"$(?!\\s)",p)),f&&(t=s.lastIndex),n=a.call(u?r:s,y),u?n?(n.input=n.input.slice(g),n[0]=n[0].slice(g),n.index=s.lastIndex,s.lastIndex+=n[0].length):s.lastIndex=0:f&&n&&(s.lastIndex=s.global?n.index+n[0].length:t),h&&n&&n.length>1&&c.call(n[0],r,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(n[o]=void 0)})),n}),e.exports=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.patientCompartment=["Account","AdverseEvent","AllergyIntolerance","Appointment","AppointmentResponse","AuditEvent","Basic","BodySite","BodyStructure","CarePlan","CareTeam","ChargeItem","Claim","ClaimResponse","ClinicalImpression","Communication","CommunicationRequest","Composition","Condition","Consent","Coverage","CoverageEligibilityRequest","CoverageEligibilityResponse","DetectedIssue","DeviceRequest","DeviceUseRequest","DeviceUseStatement","DiagnosticOrder","DiagnosticReport","DocumentManifest","DocumentReference","EligibilityRequest","Encounter","EnrollmentRequest","EpisodeOfCare","ExplanationOfBenefit","FamilyMemberHistory","Flag","Goal","Group","ImagingManifest","ImagingObjectSelection","ImagingStudy","Immunization","ImmunizationEvaluation","ImmunizationRecommendation","Invoice","List","MeasureReport","Media","MedicationAdministration","MedicationDispense","MedicationOrder","MedicationRequest","MedicationStatement","MolecularSequence","NutritionOrder","Observation","Order","Patient","Person","Procedure","ProcedureRequest","Provenance","QuestionnaireResponse","ReferralRequest","RelatedPerson","RequestGroup","ResearchSubject","RiskAssessment","Schedule","ServiceRequest","Specimen","SupplyDelivery","SupplyRequest","VisionPrescription"],t.fhirVersions={"0.4.0":2,"0.5.0":2,"1.0.0":2,"1.0.1":2,"1.0.2":2,"1.1.0":3,"1.4.0":3,"1.6.0":3,"1.8.0":3,"3.0.0":3,"3.0.1":3,"3.3.0":4,"3.5.0":4,"4.0.0":4,"4.0.1":4},t.patientParams=["patient","subject","requester","member","actor","beneficiary"],t.SMART_KEY="SMART_KEY"},function(e,t,r){var n=r(5),o=r(74),i=r(22),s=r(16),a=r(17),c=r(7),u=r(42),f=Object.getOwnPropertyDescriptor;t.f=n?f:function(e,t){if(e=s(e),t=a(t,!0),u)try{return f(e,t)}catch(e){}if(c(e,t))return i(!o.f.call(e,t),e[t])}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,r){var n=r(0),o=r(11),i="".split;e.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?i.call(e,""):Object(e)}:Object},function(e,t,r){var n=r(1),o=r(12);e.exports=function(e,t){try{o(n,e,t)}catch(r){n[e]=t}return t}},function(e,t){e.exports={}},function(e,t,r){var n=r(50),o=r(27).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,r){var n=r(0),o=/#|\.prototype\./,i=function(e,t){var r=a[s(e)];return r==u||r!=c&&("function"==typeof t?n(t):!!t)},s=i.normalize=function(e){return String(e).replace(o,".").toLowerCase()},a=i.data={},c=i.NATIVE="N",u=i.POLYFILL="P";e.exports=i},function(e,t,r){var n=r(4),o=r(52),i=r(3)("species");e.exports=function(e,t){var r;return o(e)&&("function"!=typeof(r=e.constructor)||r!==Array&&!o(r.prototype)?n(r)&&null===(r=r[i])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===t?0:t)}},function(e,t,r){var n=r(0),o=r(3),i=r(55),s=o("species");e.exports=function(e){return i>=51||!n((function(){var t=[];return(t.constructor={})[s]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},function(e,t,r){"use strict";var n=r(2);e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t,r){"use strict";var n=r(10),o=r(19);n({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},function(e,t,r){"use strict";var n=r(13),o=r(0),i=r(3),s=r(19),a=r(12),c=i("species"),u=!o((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),f="$0"==="a".replace(/./,"$0"),l=!o((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2!==r.length||"a"!==r[0]||"b"!==r[1]}));e.exports=function(e,t,r,h){var p=i(e),d=!o((function(){var t={};return t[p]=function(){return 7},7!=""[e](t)})),g=d&&!o((function(){var t=!1,r=/a/;return"split"===e&&((r={}).constructor={},r.constructor[c]=function(){return r},r.flags="",r[p]=/./[p]),r.exec=function(){return t=!0,null},r[p](""),!t}));if(!d||!g||"replace"===e&&(!u||!f)||"split"===e&&!l){var y=/./[p],v=r(p,""[e],(function(e,t,r,n,o){return t.exec===s?d&&!o?{done:!0,value:y.call(t,r,n)}:{done:!0,value:e.call(r,t,n)}:{done:!1}}),{REPLACE_KEEPS_$0:f}),m=v[0],b=v[1];n(String.prototype,e,m),n(RegExp.prototype,p,2==t?function(e,t){return b.call(e,this,t)}:function(e){return b.call(e,this)})}h&&a(RegExp.prototype[p],"sham",!0)}},function(e,t,r){"use strict";var n=r(88).charAt;e.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},function(e,t,r){var n=r(11),o=r(19);e.exports=function(e,t){var r=e.exec;if("function"==typeof r){var i=r.call(e,t);if("object"!=typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==n(e))throw TypeError("RegExp#exec called on incompatible receiver");return o.call(e,t)}},function(e,t,r){var n={};n[r(3)("toStringTag")]="z",e.exports="[object z]"===String(n)},function(e,t){var r=function(e){function t(){this.fetch=!1,this.DOMException=e.DOMException}return t.prototype=e,new t}("undefined"!=typeof self?self:this);!function(e){!function(t){var r={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(r.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],o=ArrayBuffer.isView||function(e){return e&&n.indexOf(Object.prototype.toString.call(e))>-1};function i(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function s(e){return"string"!=typeof e&&(e=String(e)),e}function a(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r.iterable&&(t[Symbol.iterator]=function(){return t}),t}function c(e){this.map={},e instanceof c?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function u(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function f(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function l(e){var t=new FileReader,r=f(t);return t.readAsArrayBuffer(e),r}function h(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function p(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:r.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:r.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():r.arrayBuffer&&r.blob&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=h(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||o(e))?this._bodyArrayBuffer=h(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var e=u(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?u(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(l)}),this.text=function(){var e,t,r,n=u(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,r=f(t),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(y)}),this.json=function(){return this.text().then(JSON.parse)},this}c.prototype.append=function(e,t){e=i(e),t=s(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},c.prototype.delete=function(e){delete this.map[i(e)]},c.prototype.get=function(e){return e=i(e),this.has(e)?this.map[e]:null},c.prototype.has=function(e){return this.map.hasOwnProperty(i(e))},c.prototype.set=function(e,t){this.map[i(e)]=s(t)},c.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},c.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),a(e)},c.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),a(e)},c.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),a(e)},r.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var d=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function g(e,t){var r,n,o=(t=t||{}).body;if(e instanceof g){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new c(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new c(t.headers)),this.method=(r=t.method||this.method||"GET",n=r.toUpperCase(),d.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function y(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}})),t}function v(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new c(t.headers),this.url=t.url||"",this._initBody(e)}g.prototype.clone=function(){return new g(this,{body:this._bodyInit})},p.call(g.prototype),p.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},v.error=function(){var e=new v(null,{status:0,statusText:""});return e.type="error",e};var m=[301,302,303,307,308];v.redirect=function(e,t){if(-1===m.indexOf(t))throw new RangeError("Invalid status code");return new v(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(e){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function b(e,n){return new Promise((function(o,i){var s=new g(e,n);if(s.signal&&s.signal.aborted)return i(new t.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function u(){a.abort()}a.onload=function(){var e,t,r={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new c,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();t.append(n,o)}})),t)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var n="response"in a?a.response:a.responseText;o(new v(n,r))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.onabort=function(){i(new t.DOMException("Aborted","AbortError"))},a.open(s.method,s.url,!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&r.blob&&(a.responseType="blob"),s.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),s.signal&&(s.signal.addEventListener("abort",u),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",u)}),a.send(void 0===s._bodyInit?null:s._bodyInit)}))}b.polyfill=!0,e.fetch||(e.fetch=b,e.Headers=c,e.Request=g,e.Response=v),t.Headers=c,t.Request=g,t.Response=v,t.fetch=b}({})}(r),delete r.fetch.polyfill,(t=r.fetch).default=r.fetch,t.fetch=r.fetch,t.Headers=r.Headers,t.Request=r.Request,t.Response=r.Response,e.exports=t},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(39),o=r(66),i=r(20);t.KEY=i.SMART_KEY;const s=n.debug.extend("oauth2");function a(e="/"){const t=String(e).replace(/\/*$/,"/")+"metadata";return n.getAndCache(t).catch(e=>{throw new Error(`Failed to fetch the conformance statement from "${t}". ${e}`)})}function c(e="/"){const t=String(e).replace(/\/*$/,"/")+".well-known/smart-configuration";return n.getAndCache(t).catch(e=>{throw new Error(`Failed to fetch the well-known json "${t}". ${e.message}`)})}function u(e="/"){return c(e).then(e=>{if(!e.authorization_endpoint||!e.token_endpoint)throw new Error("Invalid wellKnownJson");return{registrationUri:e.registration_endpoint||"",authorizeUri:e.authorization_endpoint,tokenUri:e.token_endpoint}}).catch(()=>a(e).then(e=>{const t=(n.getPath(e||{},"rest.0.security.extension")||[]).filter(e=>"http://fhir-registry.smarthealthit.org/StructureDefinition/oauth-uris"===e.url).map(e=>e.extension)[0],r={registrationUri:"",authorizeUri:"",tokenUri:""};return t&&t.forEach(e=>{"register"===e.url&&(r.registrationUri=e.valueUri),"authorize"===e.url&&(r.authorizeUri=e.valueUri),"token"===e.url&&(r.tokenUri=e.valueUri)}),r}))}async function f(e,t={},r=!1){const{redirect_uri:o,clientSecret:a,fakeTokenResponse:c,patientId:f,encounterId:l,client_id:h}=t;let{iss:p,launch:d,fhirServiceUrl:g,redirectUri:y,scope:v="",clientId:m}=t;const b=e.getUrl(),w=e.getStorage();p=b.searchParams.get("iss")||p,g=b.searchParams.get("fhirServiceUrl")||g,d=b.searchParams.get("launch")||d,m||(m=h),y||(y=o),y=y?e.relative(y):e.relative(".");const x=String(p||g||"");if(!x)throw new Error("No server url found. It must be specified as `iss` or as `fhirServiceUrl` parameter");p&&s("Making %s launch...",d?"EHR":"standalone"),d&&!v.match(/launch/)&&(v+=" launch"),await w.unset(i.SMART_KEY);const E=n.randomString(16),C={clientId:m,scope:v,redirectUri:y,serverUrl:x,clientSecret:a,tokenResponse:{},key:E};c&&Object.assign(C.tokenResponse,c),f&&Object.assign(C.tokenResponse,{patient:f}),l&&Object.assign(C.tokenResponse,{encounter:l});let S=y+"?state="+encodeURIComponent(E);if(g&&!p)return s("Making fake launch..."),await w.set(E,C),r?S:await e.redirect(S);const _=await u(x);if(Object.assign(C,_),await w.set(E,C),!C.authorizeUri)return r?S:await e.redirect(S);const O=["response_type=code","client_id="+encodeURIComponent(m||""),"scope="+encodeURIComponent(v),"redirect_uri="+encodeURIComponent(y),"aud="+encodeURIComponent(x),"state="+encodeURIComponent(E)];return d&&O.push("launch="+encodeURIComponent(d)),S=C.authorizeUri+"?"+O.join("&"),r?S:await e.redirect(S)}async function l(e){var t,r,a,c;const u=e.getUrl(),f=e.getStorage(),l=u.searchParams;let p=l.get("state");const d=l.get("code"),g=l.get("error"),y=l.get("error_description");if(p||(p=await f.get(i.SMART_KEY)),g||y)throw new Error([g,y].filter(Boolean).join(": "));if(s("key: %s, code: %O",p,d),!p)throw new Error("No 'state' parameter found. Please (re)launch the app.");let v=await f.get(p);const m=!n.isBrowser()||n.getPath(e,"options.fullSessionStorageSupport"),b=l.has("state");if(n.isBrowser()&&n.getPath(e,"options.replaceBrowserHistory")&&(d||b)&&(d&&(l.delete("code"),s("Removed code parameter from the url.")),b&&m&&(l.delete("state"),s("Removed state parameter from the url.")),window.history.replaceState&&window.history.replaceState({},"",u.href)),!v)throw new Error("No state found! Please (re)launch the app.");if(!(!d||(null===(r=null===(t=v)||void 0===t?void 0:t.tokenResponse)||void 0===r?void 0:r.access_token))&&v.tokenUri){if(!d)throw new Error("'code' url parameter is required");s("Preparing to exchange the code for access token...");const e=h(d,v);s("Token request options: %O",e);const t=await n.request(v.tokenUri,e);if(s("Token response: %O",t),!t.access_token)throw new Error("Failed to obtain access token.");v=Object.assign(Object.assign({},v),{tokenResponse:t}),await f.set(p,v),s("Authorization successful!")}else s((null===(c=null===(a=v)||void 0===a?void 0:a.tokenResponse)||void 0===c?void 0:c.access_token)?"Already authorized":"No authorization needed");m&&await f.set(i.SMART_KEY,p);const w=new o.default(e,v);return s("Created client instance: %O",w),w}function h(e,t){const{redirectUri:r,clientSecret:o,tokenUri:i,clientId:a}=t;if(!r)throw new Error("Missing state.redirectUri");if(!i)throw new Error("Missing state.tokenUri");if(!a)throw new Error("Missing state.clientId");const c={method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:`code=${e}&grant_type=authorization_code&redirect_uri=${encodeURIComponent(r)}`};return o?(c.headers.Authorization="Basic "+n.btoa(a+":"+o),s("Using state.clientSecret to construct the authorization header: %s",c.headers.Authorization)):(s("No clientSecret found in state. Adding the clientId to the POST body"),c.body+=`&client_id=${encodeURIComponent(a)}`),c}t.fetchConformanceStatement=a,t.fetchWellKnownJson=c,t.fetchFhirVersion=function(e="/"){return a(e).then(e=>e.fhirVersion)},t.getSecurityExtensions=u,t.authorize=f,t.completeAuth=l,t.buildTokenRequest=h,t.ready=async function(e,t,r){let n=l(e);return t&&(n=n.then(t)),r&&(n=n.catch(r)),n},t.init=async function(e,t){const r=e.getUrl(),n=r.searchParams.get("code"),s=r.searchParams.get("state");if(n&&s)return l(e);const a=e.getStorage(),c=s||await a.get(i.SMART_KEY),u=await a.get(c);return u?new o.default(e,u):f(e,t).then(()=>new Promise(()=>{}))}},function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const n=r(71),o=r(20),i=r(72),{fetch:s}=r(37),a=i("FHIR");function c(){return"object"==typeof window}async function u(e){if(!e.ok)throw await h(e);return e}function f(e){return e.text().then(e=>e.length?JSON.parse(e):"")}function l(e,t={}){return s(e,Object.assign(Object.assign({mode:"cors"},t),{headers:Object.assign({accept:"application/json"},t.headers)})).then(u).then(e=>{const t=e.headers.get("Content-Type")+"";return t.match(/\bjson\b/i)?f(e):t.match(/^text\//i)?e.text():e})}async function h(e){let t=`${e.status} ${e.statusText}\nURL: ${e.url}`;try{const r=e.headers.get("Content-Type")||"text/plain";if(r.match(/\bjson\b/i)){const r=await e.json();r.error?(t+="\n"+r.error,r.error_description&&(t+=": "+r.error_description)):t+="\n\n"+JSON.stringify(r,null,4)}if(r.match(/^text\//i)){const r=await e.text();r&&(t+="\n\n"+r)}}catch(e){}throw new n.default(t,e.status,e.statusText)}function p(e,t=""){return(t=t.trim())?t.split(".").reduce((e,t)=>e?e[t]:void 0,e):e}function d(e){return Array.isArray(e)?e:[e]}function g(t){return c()?window.atob(t):e.Buffer.from(t,"base64").toString("ascii")}function y(e,t){const r={};function n(e,t){e&&Array.isArray(e.coding)&&e.coding.forEach(({code:e})=>{e&&(r[e]=r[e]||[],r[e].push(t))})}return d(e).forEach(e=>{"Observation"===e.resourceType&&e[t]&&(Array.isArray(e[t])?e[t].forEach(t=>n(t,e)):n(e[t],e))}),r}function v({value:e,code:t}){if("number"!=typeof e)throw new Error("Found a non-numerical unit: "+e+" "+t)}t.debug=a,t.isBrowser=c,t.checkResponse=u,t.responseToJSON=f,t.request=l,t.getAndCache=(()=>{const e={};return(t,r=!1)=>r||!e[t]?(e[t]=l(t),e[t]):Promise.resolve(e[t])})(),t.humanizeError=h,t.stripTrailingSlash=function(e){return String(e||"").replace(/\/+$/,"")},t.getPath=p,t.setPath=function(e,t,r){return t.trim().split(".").reduce((e,t,n,o)=>{if(!e||n!==o.length-1)return e?e[t]:void 0;e[t]=r},e),e},t.makeArray=d,t.absolute=function(e,t){return e.match(/^http/)?e:e.match(/^urn/)?e:String(t||"").replace(/\/+$/,"")+"/"+e.replace(/^\/+/,"")},t.randomString=function(e=8,t){const r=[],n=(t=t||"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789").length;for(;e--;)r.push(t.charAt(Math.floor(Math.random()*n)));return r.join("")},t.atob=g,t.btoa=function(t){return c()?window.btoa(t):e.Buffer.from(t).toString("base64")},t.jwtDecode=function(e){const t=e.split(".")[1];return JSON.parse(g(t))},t.byCode=y,t.byCodes=function(e,t){const r=y(e,t);return(...e)=>e.filter(e=>e+""in r).reduce((e,t)=>e.concat(r[t+""]),[])},t.ensureNumerical=v,t.units={cm({code:e,value:t}){if(v({code:e,value:t}),"cm"==e)return t;if("m"==e)return 100*t;if("in"==e)return 2.54*t;if("[in_us]"==e)return 2.54*t;if("[in_i]"==e)return 2.54*t;if("ft"==e)return 30.48*t;if("[ft_us]"==e)return 30.48*t;throw new Error("Unrecognized length unit: "+e)},kg({code:e,value:t}){if(v({code:e,value:t}),"kg"==e)return t;if("g"==e)return t/1e3;if(e.match(/lb/))return t/2.20462;if(e.match(/oz/))return t/35.274;throw new Error("Unrecognized weight unit: "+e)},any:e=>(v(e),e.value)},t.getPatientParam=function(e,t){const r=(p(e,"rest.0.resource")||[]).find(e=>e.type===t);if(!r)throw new Error(`Resource "${t}" is not supported by this FHIR server`);if(!Array.isArray(r.searchParam))throw new Error(`No search parameters supported for "${t}" on this FHIR server`);if("Patient"==t&&r.searchParam.find(e=>"_id"==e.name))return"_id";const n=o.patientParams.find(e=>r.searchParam.find(t=>t.name==e));if(!n)throw new Error("I don't know what param to use for "+t);return n}}).call(this,r(40))},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";var n=r(10),o=r(51),i=r(14),s=r(9),a=r(15),c=r(29),u=r(54),f=r(30),l=Math.max,h=Math.min;n({target:"Array",proto:!0,forced:!f("splice")},{splice:function(e,t){var r,n,f,p,d,g,y=a(this),v=s(y.length),m=o(e,v),b=arguments.length;if(0===b?r=n=0:1===b?(r=0,n=v-m):(r=b-2,n=h(l(i(t),0),v-m)),v+r-n>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(f=c(y,n),p=0;p<n;p++)(d=m+p)in y&&u(f,p,y[d]);if(f.length=n,r<n){for(p=m;p<v-n;p++)g=p+r,(d=p+n)in y?y[g]=y[d]:delete y[g];for(p=v;p>v-n+r;p--)delete y[p-1]}else if(r>n)for(p=v-n;p>m;p--)g=p+r-1,(d=p+n-1)in y?y[g]=y[d]:delete y[g];for(p=0;p<r;p++)y[p+m]=arguments[p+2];return y.length=v-n+r,f}})},function(e,t,r){var n=r(5),o=r(0),i=r(43);e.exports=!n&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},function(e,t,r){var n=r(1),o=r(4),i=n.document,s=o(i)&&o(i.createElement);e.exports=function(e){return s?i.createElement(e):{}}},function(e,t,r){var n=r(45),o=Function.toString;"function"!=typeof n.inspectSource&&(n.inspectSource=function(e){return o.call(e)}),e.exports=n.inspectSource},function(e,t,r){var n=r(1),o=r(24),i=n["__core-js_shared__"]||o("__core-js_shared__",{});e.exports=i},function(e,t,r){var n,o,i,s=r(75),a=r(1),c=r(4),u=r(12),f=r(7),l=r(47),h=r(25),p=a.WeakMap;if(s){var d=new p,g=d.get,y=d.has,v=d.set;n=function(e,t){return v.call(d,e,t),t},o=function(e){return g.call(d,e)||{}},i=function(e){return y.call(d,e)}}else{var m=l("state");h[m]=!0,n=function(e,t){return u(e,m,t),t},o=function(e){return f(e,m)?e[m]:{}},i=function(e){return f(e,m)}}e.exports={set:n,get:o,has:i,enforce:function(e){return i(e)?o(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!c(t)||(r=o(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return r}}}},function(e,t,r){var n=r(48),o=r(49),i=n("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},function(e,t,r){var n=r(76),o=r(45);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.6.0",mode:n?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++r+n).toString(36)}},function(e,t,r){var n=r(7),o=r(16),i=r(80).indexOf,s=r(25);e.exports=function(e,t){var r,a=o(e),c=0,u=[];for(r in a)!n(s,r)&&n(a,r)&&u.push(r);for(;t.length>c;)n(a,r=t[c++])&&(~i(u,r)||u.push(r));return u}},function(e,t,r){var n=r(14),o=Math.max,i=Math.min;e.exports=function(e,t){var r=n(e);return r<0?o(r+t,0):i(r,t)}},function(e,t,r){var n=r(11);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,r){var n=r(0);e.exports=!!Object.getOwnPropertySymbols&&!n((function(){return!String(Symbol())}))},function(e,t,r){"use strict";var n=r(17),o=r(8),i=r(22);e.exports=function(e,t,r){var s=n(t);s in e?o.f(e,s,i(0,r)):e[s]=r}},function(e,t,r){var n,o,i=r(1),s=r(83),a=i.process,c=a&&a.versions,u=c&&c.v8;u?o=(n=u.split("."))[0]+n[1]:s&&(!(n=s.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=s.match(/Chrome\/(\d+)/))&&(o=n[1]),e.exports=o&&+o},function(e,t,r){var n=r(5),o=r(1),i=r(28),s=r(57),a=r(8).f,c=r(26).f,u=r(58),f=r(31),l=r(59),h=r(13),p=r(0),d=r(46).set,g=r(86),y=r(3)("match"),v=o.RegExp,m=v.prototype,b=/a/g,w=/a/g,x=new v(b)!==b,E=l.UNSUPPORTED_Y;if(n&&i("RegExp",!x||E||p((function(){return w[y]=!1,v(b)!=b||v(w)==w||"/a/i"!=v(b,"i")})))){for(var C=function(e,t){var r,n=this instanceof C,o=u(e),i=void 0===t;if(!n&&o&&e.constructor===C&&i)return e;x?o&&!i&&(e=e.source):e instanceof C&&(i&&(t=f.call(e)),e=e.source),E&&(r=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,""));var a=s(x?new v(e,t):v(e,t),n?this:m,C);return E&&r&&d(a,{sticky:r}),a},S=function(e){e in C||a(C,e,{configurable:!0,get:function(){return v[e]},set:function(t){v[e]=t}})},_=c(v),O=0;_.length>O;)S(_[O++]);m.constructor=C,C.prototype=m,h(o,"RegExp",C)}g("RegExp")},function(e,t,r){var n=r(4),o=r(84);e.exports=function(e,t,r){var i,s;return o&&"function"==typeof(i=t.constructor)&&i!==r&&n(s=i.prototype)&&s!==r.prototype&&o(e,s),e}},function(e,t,r){var n=r(4),o=r(11),i=r(3)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==o(e))}},function(e,t,r){"use strict";var n=r(0);function o(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=n((function(){var e=o("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=n((function(){var e=o("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},function(e,t,r){"use strict";var n=r(13),o=r(2),i=r(0),s=r(31),a=RegExp.prototype,c=a.toString,u=i((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),f="toString"!=c.name;(u||f)&&n(RegExp.prototype,"toString",(function(){var e=o(this),t=String(e.source),r=e.flags;return"/"+t+"/"+String(void 0===r&&e instanceof RegExp&&!("flags"in a)?s.call(e):r)}),{unsafe:!0})},function(e,t,r){"use strict";var n=r(33),o=r(2),i=r(15),s=r(9),a=r(14),c=r(6),u=r(34),f=r(35),l=Math.max,h=Math.min,p=Math.floor,d=/\$([$&'`]|\d\d?|<[^>]*>)/g,g=/\$([$&'`]|\d\d?)/g;n("replace",2,(function(e,t,r,n){return[function(r,n){var o=c(this),i=null==r?void 0:r[e];return void 0!==i?i.call(r,o,n):t.call(String(o),r,n)},function(e,i){if(n.REPLACE_KEEPS_$0||"string"==typeof i&&-1===i.indexOf("$0")){var c=r(t,e,this,i);if(c.done)return c.value}var p=o(e),d=String(this),g="function"==typeof i;g||(i=String(i));var v=p.global;if(v){var m=p.unicode;p.lastIndex=0}for(var b=[];;){var w=f(p,d);if(null===w)break;if(b.push(w),!v)break;""===String(w[0])&&(p.lastIndex=u(d,s(p.lastIndex),m))}for(var x,E="",C=0,S=0;S<b.length;S++){w=b[S];for(var _=String(w[0]),O=l(h(a(w.index),d.length),0),R=[],P=1;P<w.length;P++)R.push(void 0===(x=w[P])?x:String(x));var T=w.groups;if(g){var A=[_].concat(R,O,d);void 0!==T&&A.push(T);var k=String(i.apply(void 0,A))}else k=y(_,d,O,R,T,i);O>=C&&(E+=d.slice(C,O)+k,C=O+_.length)}return E+d.slice(C)}];function y(e,r,n,o,s,a){var c=n+e.length,u=o.length,f=g;return void 0!==s&&(s=i(s),f=d),t.call(a,f,(function(t,i){var a;switch(i.charAt(0)){case"$":return"$";case"&":return e;case"`":return r.slice(0,n);case"'":return r.slice(c);case"<":a=s[i.slice(1,-1)];break;default:var f=+i;if(0===f)return t;if(f>u){var l=p(f/10);return 0===l?t:l<=u?void 0===o[l-1]?i.charAt(1):o[l-1]+i.charAt(1):t}a=o[f-1]}return void 0===a?"":a}))}}))},function(e,t,r){"use strict";var n=r(0);e.exports=function(e,t){var r=[][e];return!r||!n((function(){r.call(null,t||function(){throw 1},1)}))}},function(e,t,r){var n=r(93),o=r(23),i=r(15),s=r(9),a=r(29),c=[].push,u=function(e){var t=1==e,r=2==e,u=3==e,f=4==e,l=6==e,h=5==e||l;return function(p,d,g,y){for(var v,m,b=i(p),w=o(b),x=n(d,g,3),E=s(w.length),C=0,S=y||a,_=t?S(p,E):r?S(p,0):void 0;E>C;C++)if((h||C in w)&&(m=x(v=w[C],C,b),e))if(t)_[C]=m;else if(m)switch(e){case 3:return!0;case 5:return v;case 6:return C;case 2:c.call(_,v)}else if(f)return!1;return l?-1:u||f?f:_}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6)}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t,r){var n=r(50),o=r(27);e.exports=Object.keys||function(e){return n(e,o)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(39),o=r(110),i=r(38),s=r(20),{Response:a}=r(37),c=n.debug.extend("client");function u(e,t,r,o){let i=n.makeArray(t.resolveReferences).filter(Boolean).map(e=>String(e).trim()).filter(Boolean);if(i=i.filter((e,t)=>{return!(i.indexOf(e,t+1)>-1)||(c('Duplicated reference path "%s"',e),!1)}),!i.length)return Promise.resolve();const s={};i.forEach(e=>{const t=e.split(".").length;s[t]||(s[t]=[]),s[t].push(e)});let a=Promise.resolve();return Object.keys(s).sort().forEach(i=>{const c=s[i];a=a.then(()=>Promise.all(c.map(i=>(function(e,t,r,o,i){const s=n.getPath(e,t);if(s){const a=Array.isArray(s);return Promise.all(n.makeArray(s).map((s,c)=>{const u=s.reference;if(u)return function(e,t,r){const n=t[e];return n||(t[e]=r.request(e).then(r=>(t[e]=r,r),r=>{throw delete t[e],r}),t[e])}(u,o,i).then(o=>{r&&(a?n.setPath(e,`${t}.${c}`,o):n.setPath(e,t,o))}).catch(()=>{})}))}})(e,i,!!t.graph,r,o))))}),a}t.default=class{constructor(e,t){this._refreshTask=null,this.byCode=n.byCode,this.byCodes=n.byCodes,this.units=n.units,this.getPath=n.getPath;const r="string"==typeof t?{serverUrl:t}:t;if(!r.serverUrl||!r.serverUrl.match(/https?:\/\/.+/))throw new Error('A "serverUrl" option is required and must begin with "http(s)"');this.state=r,this.environment=e;const o=this;this.patient={get id(){return o.getPatientId()},read:()=>{const e=this.patient.id;return e?this.request(`Patient/${e}`):Promise.reject(new Error("Patient is not available"))},request:(e,t={})=>this.patient.id?(async()=>{const r=await async function(e,t){const r=n.absolute("/",t.state.serverUrl);async function o(e){const r=e.pathname.split("/").pop();if(!r)throw new Error(`Invalid url "${e}"`);if(-1==s.patientCompartment.indexOf(r))throw new Error(`Cannot filter "${r}" resources by patient`);const o=await i.fetchConformanceStatement(t.state.serverUrl),a=n.getPatientParam(o,r);return e.searchParams.set(a,t.patient.id),e.href}return"string"==typeof e||e instanceof URL?{url:await o(new URL(e+"",r))}:(e.url=await o(new URL(e.url+"",r)),e)}(e,this);return this.request(r,t)})():Promise.reject(new Error("Patient is not available"))},this.encounter={get id(){return o.getEncounterId()},read:()=>{const e=this.encounter.id;return e?this.request(`Encounter/${e}`):Promise.reject(new Error("Encounter is not available"))}},this.user={get fhirUser(){return o.getFhirUser()},get id(){return o.getUserId()},get resourceType(){return o.getUserType()},read:()=>{const e=this.user.fhirUser;return e?this.request(e):Promise.reject(new Error("User is not available"))}},this.connect(e.fhir)}connect(e){if("function"==typeof e){const t={baseUrl:this.state.serverUrl.replace(/\/$/,"")},r=n.getPath(this,"state.tokenResponse.access_token");if(r)t.auth={token:r};else{const{username:e,password:r}=this.state;e&&r&&(t.auth={user:e,pass:r})}this.api=e(t);const o=n.getPath(this,"state.tokenResponse.patient");o&&(this.patient.api=e(Object.assign(Object.assign({},t),{patient:o})))}return this}getPatientId(){const e=this.state.tokenResponse;return e?e.patient?e.patient:((this.state.scope||"").match(/\blaunch(\/patient)?\b/)?c("The ID of the selected patient is not available. Please check if your server supports that."):c(o.default.noScopeForId,"patient","patient"),null):(this.state.authorizeUri?c(o.default.noIfNoAuth,"the ID of the selected patient"):c(o.default.noFreeContext,"selected patient"),null)}getEncounterId(){const e=this.state.tokenResponse;return e?e.encounter?e.encounter:((this.state.scope||"").match(/\blaunch(\/encounter)?\b/)?c("The ID of the selected encounter is not available. Please check if your server supports that, and that the selected patient has any recorded encounters."):c(o.default.noScopeForId,"encounter","encounter"),null):(this.state.authorizeUri?c(o.default.noIfNoAuth,"the ID of the selected encounter"):c(o.default.noFreeContext,"selected encounter"),null)}getIdToken(){const e=this.state.tokenResponse;if(e){const t=e.id_token,r=this.state.scope||"";if(!t){const e=r.match(/\bopenid\b/),t=r.match(/\bprofile\b/),n=r.match(/\bfhirUser\b/);return c(e&&(n||t)?"The id_token is not available. Please check if your server supports that.":"You are trying to get the id_token but you are not using the right scopes. Please add 'openid' and 'fhirUser' or 'profile' to the scopes you are requesting."),null}return n.jwtDecode(t)}return this.state.authorizeUri?c(o.default.noIfNoAuth,"the id_token"):c(o.default.noFreeContext,"id_token"),null}getFhirUser(){const e=this.getIdToken();return e?e.profile:null}getUserId(){const e=this.getFhirUser();return e?e.split("/")[1]:null}getUserType(){const e=this.getFhirUser();return e?e.split("/")[0]:null}getAuthorizationHeader(){const e=n.getPath(this,"state.tokenResponse.access_token");if(e)return"Bearer "+e;const{username:t,password:r}=this.state;return t&&r?"Basic "+n.btoa(t+":"+r):null}async _clearState(){const e=this.environment.getStorage(),t=await e.get(s.SMART_KEY);t&&await e.unset(t),await e.unset(s.SMART_KEY),this.state.tokenResponse={}}create(e){return this.request({url:`${e.resourceType}`,method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/fhir+json"}})}update(e){return this.request({url:`${e.resourceType}/${e.id}`,method:"PUT",body:JSON.stringify(e),headers:{"Content-Type":"application/fhir+json"}})}delete(e){return this.request({url:e,method:"DELETE"})}async request(e,t={},r={}){var i;const s=n.debug.extend("client:request");if(!e)throw new Error("request requires an url or request options as argument");let c;"string"==typeof e||e instanceof URL?(c=String(e),e={}):c=String(e.url),c=n.absolute(c,this.state.serverUrl);const f=this.getAuthorizationHeader();f&&(e.headers=Object.assign(Object.assign({},e.headers),{Authorization:f}));const l={graph:!1!==t.graph,flat:!!t.flat,pageLimit:(i=t.pageLimit,null!=i?i:1),resolveReferences:t.resolveReferences||[],useRefreshToken:!1!==t.useRefreshToken,onPage:"function"==typeof t.onPage?t.onPage:void 0};return s("%s, options: %O, fhirOptions: %O",c,e,l),n.request(c,e).catch(t=>{if(s("%o",t),401==t.status&&l.useRefreshToken){if(n.getPath(this,"state.tokenResponse.refresh_token"))return this.refresh().then(()=>this.request(Object.assign(Object.assign({},e),{url:c}),l,r))}throw t}).catch(async e=>{if(401==e.status){if(!n.getPath(this,"state.tokenResponse.access_token"))throw new Error("This app cannot be accessed directly. Please launch it as SMART app!");if(!l.useRefreshToken)throw s("Your session has expired and the useRefreshToken option is set to false. Please re-launch the app."),await this._clearState(),new Error(o.default.expired);throw s("Auto-refresh failed! Please re-launch the app."),await this._clearState(),new Error(o.default.expired)}throw e}).catch(e=>{throw 403==e.status&&s("Permission denied! Please make sure that you have requested the proper scopes."),e}).then(e=>e?"string"==typeof e?e:"object"==typeof e&&e instanceof a?e:(async e=>(e&&("Bundle"==e.resourceType?await Promise.all((e.entry||[]).map(e=>u(e.resource,l,r,this))):await u(e,l,r,this)),e))(e).then(async e=>{if(e&&"Bundle"==e.resourceType){const t=e.link||[];if(l.flat&&(e=(e.entry||[]).map(e=>e.resource)),l.onPage&&await l.onPage(e,Object.assign({},r)),--l.pageLimit){const o=t.find(e=>"next"==e.relation);if(e=n.makeArray(e),o&&o.url){const t=await this.request(o.url,l,r);return l.onPage?null:l.resolveReferences.length?(Object.assign(r,t.references),e.concat(n.makeArray(t.data||t))):e.concat(n.makeArray(t))}}}return e}).then(e=>{if(l.graph)r={};else if(!l.onPage&&l.resolveReferences.length)return{data:e,references:r};return e}):e)}refresh(){var e,t;const r=n.debug.extend("client:refresh");r("Attempting to refresh with refresh_token...");const o=null===(t=null===(e=this.state)||void 0===e?void 0:e.tokenResponse)||void 0===t?void 0:t.refresh_token;if(!o)throw new Error("Unable to refresh. No refresh_token found.");const i=this.state.tokenUri;if(!i)throw new Error("Unable to refresh. No tokenUri found.");const s=n.getPath(this,"state.tokenResponse.scope")||"";if(-1==s.indexOf("offline_access")&&-1==s.indexOf("online_access"))throw new Error("Unable to refresh. No offline_access or online_access scope found.");return this._refreshTask||(this._refreshTask=n.request(i,{mode:"cors",method:"POST",headers:{"content-type":"application/x-www-form-urlencoded"},body:`grant_type=refresh_token&refresh_token=${encodeURIComponent(o)}`,credentials:"include"}).then(e=>{if(!e.access_token)throw new Error("No access token received");return e}).then(e=>(r("Received new access token %O",e),Object.assign(this.state.tokenResponse,e),this.state)).catch(e=>{var t,n;throw(null===(n=null===(t=this.state)||void 0===t?void 0:t.tokenResponse)||void 0===n?void 0:n.refresh_token)&&(r("Deleting the expired or invalid refresh token."),delete this.state.tokenResponse.refresh_token),e}).finally(()=>{this._refreshTask=null;const e=this.state.key;e?this.environment.getStorage().set(e,this.state):r("No 'key' found in Clint.state. Cannot persist the instance.")})),this._refreshTask}getFhirVersion(){return i.fetchFhirVersion(this.state.serverUrl)}getFhirRelease(){return this.getFhirVersion().then(e=>{var t;return null!=(t=s.fhirVersions[e])?t:0})}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(68),{ready:o,authorize:i,init:s,client:a,options:c}=n.default();t.client=a;{const e=r(37);window.fetch||(window.fetch=e.default,window.Headers=e.Headers,window.Request=e.Request,window.Response=e.Response)}t.oauth2={settings:c,ready:o,authorize:i,init:s}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(69),o=r(70);class i extends o.default{constructor(){super(...arguments),this._url=null,this._storage=null}get fhir(){return"function"==typeof fhir?fhir:null}getUrl(){return this._url||(this._url=new URL(location+"")),this._url}redirect(e){location.href=e}getStorage(){return this._storage||(this._storage=new n.default),this._storage}static smart(e){return new i(e).getSmartApi()}}t.Adapter=i,t.default=i.smart},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{async get(e){const t=sessionStorage[e];return t?JSON.parse(t):null}async set(e,t){return sessionStorage[e]=JSON.stringify(t),t}async unset(e){return e in sessionStorage&&(delete sessionStorage[e],!0)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(38),o=r(66);t.default=class{constructor(e={}){this.options=Object.assign({replaceBrowserHistory:!0,fullSessionStorageSupport:!0},e)}relative(e){return new URL(e,this.getUrl().href).href}getSmartApi(){return{ready:(...e)=>n.ready(this,...e),authorize:e=>n.authorize(this,e),init:(...e)=>n.init(this,...e),client:e=>new o.default(this,e),options:this.options}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e,t,r){super(e),this.message=e,this.name="HttpError",this.statusCode=t,this.status=t,this.statusText=r}toJSON(){return{name:this.name,statusCode:this.statusCode,status:this.status,statusText:this.statusText,message:this.message}}static create(e){let t=0,r="Error",o="Unknown error";return e&&("object"==typeof e?e instanceof Error?o=e.message:e.error&&(t=e.error.status||0,r=e.error.statusText||"Error",e.error.responseText&&(o=e.error.responseText)):"string"==typeof e&&(o=e)),new n(o,t,r)}}t.default=n},function(e,t,r){"use strict";(function(n){r(41),r(56),r(32),r(60),r(87),r(61),t.log=function(){var e;return"object"==typeof console&&console.log&&(e=console).log.apply(e,arguments)},t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var n=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(n++,"%c"===e&&(o=n))})),t.splice(o,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){var e;try{e=t.storage.getItem("debug")}catch(e){}!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG);return e},t.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.exports=r(89)(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this,r(73))},function(e,t){var r,n,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var c,u=[],f=!1,l=-1;function h(){f&&c&&(f=!1,c.length?u=c.concat(u):l=-1,u.length&&p())}function p(){if(!f){var e=a(h);f=!0;for(var t=u.length;t;){for(c=u,u=[];++l<t;)c&&c[l].run();l=-1,t=u.length}c=null,f=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function g(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new d(e,t)),1!==u.length||f||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,r){"use strict";var n={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,i=o&&!n.call({1:2},1);t.f=i?function(e){var t=o(this,e);return!!t&&t.enumerable}:n},function(e,t,r){var n=r(1),o=r(44),i=n.WeakMap;e.exports="function"==typeof i&&/native code/.test(o(i))},function(e,t){e.exports=!1},function(e,t,r){var n=r(7),o=r(78),i=r(21),s=r(8);e.exports=function(e,t){for(var r=o(t),a=s.f,c=i.f,u=0;u<r.length;u++){var f=r[u];n(e,f)||a(e,f,c(t,f))}}},function(e,t,r){var n=r(18),o=r(26),i=r(81),s=r(2);e.exports=n("Reflect","ownKeys")||function(e){var t=o.f(s(e)),r=i.f;return r?t.concat(r(e)):t}},function(e,t,r){var n=r(1);e.exports=n},function(e,t,r){var n=r(16),o=r(9),i=r(51),s=function(e){return function(t,r,s){var a,c=n(t),u=o(c.length),f=i(s,u);if(e&&r!=r){for(;u>f;)if((a=c[f++])!=a)return!0}else for(;u>f;f++)if((e||f in c)&&c[f]===r)return e||f||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,r){var n=r(53);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol()},function(e,t,r){var n=r(18);e.exports=n("navigator","userAgent")||""},function(e,t,r){var n=r(2),o=r(85);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),t=r instanceof Array}catch(e){}return function(r,i){return n(r),o(i),t?e.call(r,i):r.__proto__=i,r}}():void 0)},function(e,t,r){var n=r(4);e.exports=function(e){if(!n(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t,r){"use strict";var n=r(18),o=r(8),i=r(3),s=r(5),a=i("species");e.exports=function(e){var t=n(e),r=o.f;s&&t&&!t[a]&&r(t,a,{configurable:!0,get:function(){return this}})}},function(e,t,r){"use strict";var n=r(33),o=r(2),i=r(9),s=r(6),a=r(34),c=r(35);n("match",1,(function(e,t,r){return[function(t){var r=s(this),n=null==t?void 0:t[e];return void 0!==n?n.call(t,r):new RegExp(t)[e](String(r))},function(e){var n=r(t,e,this);if(n.done)return n.value;var s=o(e),u=String(this);if(!s.global)return c(s,u);var f=s.unicode;s.lastIndex=0;for(var l,h=[],p=0;null!==(l=c(s,u));){var d=String(l[0]);h[p]=d,""===d&&(s.lastIndex=a(u,i(s.lastIndex),f)),p++}return 0===p?null:h}]}))},function(e,t,r){var n=r(14),o=r(6),i=function(e){return function(t,r){var i,s,a=String(o(t)),c=n(r),u=a.length;return c<0||c>=u?e?"":void 0:(i=a.charCodeAt(c))<55296||i>56319||c+1===u||(s=a.charCodeAt(c+1))<56320||s>57343?e?a.charAt(c):i:e?a.slice(c,c+2):s-56320+(i-55296<<10)+65536}};e.exports={codeAt:i(!1),charAt:i(!0)}},function(e,t,r){"use strict";r(90),r(91),r(92),r(41),r(94),r(100),r(101),r(56),r(32),r(60),r(61),r(104),r(106),e.exports=function(e){function t(e){for(var t=0,r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return n.colors[Math.abs(t)%n.colors.length]}function n(e){var r;function s(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];if(s.enabled){var i=s,a=Number(new Date),c=a-(r||a);i.diff=c,i.prev=r,i.curr=a,r=a,t[0]=n.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");var u=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,(function(e,r){if("%%"===e)return e;u++;var o=n.formatters[r];if("function"==typeof o){var s=t[u];e=o.call(i,s),t.splice(u,1),u--}return e})),n.formatArgs.call(i,t),(i.log||n.log).apply(i,t)}}return s.namespace=e,s.enabled=n.enabled(e),s.useColors=n.useColors(),s.color=t(e),s.destroy=o,s.extend=i,"function"==typeof n.init&&n.init(s),n.instances.push(s),s}function o(){var e=n.instances.indexOf(this);return-1!==e&&(n.instances.splice(e,1),!0)}function i(e,t){var r=n(this.namespace+(void 0===t?":":t)+e);return r.log=this.log,r}function s(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return n.debug=n,n.default=n,n.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},n.disable=function(){var e=[].concat(n.names.map(s),n.skips.map(s).map((function(e){return"-"+e}))).join(",");return n.enable(""),e},n.enable=function(e){var t;n.save(e),n.names=[],n.skips=[];var r=("string"==typeof e?e:"").split(/[\s,]+/),o=r.length;for(t=0;t<o;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")));for(t=0;t<n.instances.length;t++){var i=n.instances[t];i.enabled=n.enabled(i.namespace)}},n.enabled=function(e){if("*"===e[e.length-1])return!0;var t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=r(109),Object.keys(e).forEach((function(t){n[t]=e[t]})),n.instances=[],n.names=[],n.skips=[],n.formatters={},n.selectColor=t,n.enable(n.load()),n}},function(e,t,r){"use strict";var n=r(10),o=r(0),i=r(52),s=r(4),a=r(15),c=r(9),u=r(54),f=r(29),l=r(30),h=r(3),p=r(55),d=h("isConcatSpreadable"),g=p>=51||!o((function(){var e=[];return e[d]=!1,e.concat()[0]!==e})),y=l("concat"),v=function(e){if(!s(e))return!1;var t=e[d];return void 0!==t?!!t:i(e)};n({target:"Array",proto:!0,forced:!g||!y},{concat:function(e){var t,r,n,o,i,s=a(this),l=f(s,0),h=0;for(t=-1,n=arguments.length;t<n;t++)if(i=-1===t?s:arguments[t],v(i)){if(h+(o=c(i.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(r=0;r<o;r++,h++)r in i&&u(l,h,i[r])}else{if(h>=9007199254740991)throw TypeError("Maximum allowed index exceeded");u(l,h++,i)}return l.length=h,l}})},function(e,t,r){"use strict";var n=r(10),o=r(23),i=r(16),s=r(62),a=[].join,c=o!=Object,u=s("join",",");n({target:"Array",proto:!0,forced:c||u},{join:function(e){return a.call(i(this),void 0===e?",":e)}})},function(e,t,r){"use strict";var n=r(10),o=r(63).map,i=r(0),s=r(30)("map"),a=s&&!i((function(){[].map.call({length:-1,0:1},(function(e){throw e}))}));n({target:"Array",proto:!0,forced:!s||!a},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},function(e,t,r){var n=r(64);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,o){return e.call(t,r,n,o)}}return function(){return e.apply(t,arguments)}}},function(e,t,r){"use strict";var n=r(5),o=r(1),i=r(28),s=r(13),a=r(7),c=r(11),u=r(57),f=r(17),l=r(0),h=r(95),p=r(26).f,d=r(21).f,g=r(8).f,y=r(98).trim,v=o.Number,m=v.prototype,b="Number"==c(h(m)),w=function(e){var t,r,n,o,i,s,a,c,u=f(e,!1);if("string"==typeof u&&u.length>2)if(43===(t=(u=y(u)).charCodeAt(0))||45===t){if(88===(r=u.charCodeAt(2))||120===r)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+u}for(s=(i=u.slice(2)).length,a=0;a<s;a++)if((c=i.charCodeAt(a))<48||c>o)return NaN;return parseInt(i,n)}return+u};if(i("Number",!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var x,E=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof E&&(b?l((function(){m.valueOf.call(r)})):"Number"!=c(r))?u(new v(w(t)),r,E):w(t)},C=n?p(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;C.length>S;S++)a(v,x=C[S])&&!a(E,x)&&g(E,x,d(v,x));E.prototype=m,m.constructor=E,s(o,"Number",E)}},function(e,t,r){var n,o=r(2),i=r(96),s=r(27),a=r(25),c=r(97),u=r(43),f=r(47),l=f("IE_PROTO"),h=function(){},p=function(e){return"<script>"+e+"<\/script>"},d=function(){try{n=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;d=n?function(e){e.write(p("")),e.close();var t=e.parentWindow.Object;return e=null,t}(n):((t=u("iframe")).style.display="none",c.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(p("document.F=Object")),e.close(),e.F);for(var r=s.length;r--;)delete d.prototype[s[r]];return d()};a[l]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(h.prototype=o(e),r=new h,h.prototype=null,r[l]=e):r=d(),void 0===t?r:i(r,t)}},function(e,t,r){var n=r(5),o=r(8),i=r(2),s=r(65);e.exports=n?Object.defineProperties:function(e,t){i(e);for(var r,n=s(t),a=n.length,c=0;a>c;)o.f(e,r=n[c++],t[r]);return e}},function(e,t,r){var n=r(18);e.exports=n("document","documentElement")},function(e,t,r){var n=r(6),o="["+r(99)+"]",i=RegExp("^"+o+o+"*"),s=RegExp(o+o+"*$"),a=function(e){return function(t){var r=String(n(t));return 1&e&&(r=r.replace(i,"")),2&e&&(r=r.replace(s,"")),r}};e.exports={start:a(1),end:a(2),trim:a(3)}},function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},function(e,t,r){var n=r(10),o=r(15),i=r(65);n({target:"Object",stat:!0,forced:r(0)((function(){i(1)}))},{keys:function(e){return i(o(e))}})},function(e,t,r){var n=r(36),o=r(13),i=r(102);n||o(Object.prototype,"toString",i,{unsafe:!0})},function(e,t,r){"use strict";var n=r(36),o=r(103);e.exports=n?{}.toString:function(){return"[object "+o(this)+"]"}},function(e,t,r){var n=r(36),o=r(11),i=r(3)("toStringTag"),s="Arguments"==o(function(){return arguments}());e.exports=n?o:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?r:s?o(t):"Object"==(n=o(t))&&"function"==typeof t.callee?"Arguments":n}},function(e,t,r){"use strict";var n=r(33),o=r(58),i=r(2),s=r(6),a=r(105),c=r(34),u=r(9),f=r(35),l=r(19),h=r(0),p=[].push,d=Math.min,g=!h((function(){return!RegExp(4294967295,"y")}));n("split",2,(function(e,t,r){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,r){var n=String(s(this)),i=void 0===r?4294967295:r>>>0;if(0===i)return[];if(void 0===e)return[n];if(!o(e))return t.call(n,e,i);for(var a,c,u,f=[],h=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,g=new RegExp(e.source,h+"g");(a=l.call(g,n))&&!((c=g.lastIndex)>d&&(f.push(n.slice(d,a.index)),a.length>1&&a.index<n.length&&p.apply(f,a.slice(1)),u=a[0].length,d=c,f.length>=i));)g.lastIndex===a.index&&g.lastIndex++;return d===n.length?!u&&g.test("")||f.push(""):f.push(n.slice(d)),f.length>i?f.slice(0,i):f}:"0".split(void 0,0).length?function(e,r){return void 0===e&&0===r?[]:t.call(this,e,r)}:t,[function(t,r){var o=s(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,o,r):n.call(String(o),t,r)},function(e,o){var s=r(n,e,this,o,n!==t);if(s.done)return s.value;var l=i(e),h=String(this),p=a(l,RegExp),y=l.unicode,v=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(g?"y":"g"),m=new p(g?l:"^(?:"+l.source+")",v),b=void 0===o?4294967295:o>>>0;if(0===b)return[];if(0===h.length)return null===f(m,h)?[h]:[];for(var w=0,x=0,E=[];x<h.length;){m.lastIndex=g?x:0;var C,S=f(m,g?h:h.slice(x));if(null===S||(C=d(u(m.lastIndex+(g?0:x)),h.length))===w)x=c(h,x,y);else{if(E.push(h.slice(w,x)),E.length===b)return E;for(var _=1;_<=S.length-1;_++)if(E.push(S[_]),E.length===b)return E;x=w=C}}return E.push(h.slice(w)),E}]}),!g)},function(e,t,r){var n=r(2),o=r(64),i=r(3)("species");e.exports=function(e,t){var r,s=n(e).constructor;return void 0===s||null==(r=n(s)[i])?t:o(r)}},function(e,t,r){var n=r(1),o=r(107),i=r(108),s=r(12);for(var a in o){var c=n[a],u=c&&c.prototype;if(u&&u.forEach!==i)try{s(u,"forEach",i)}catch(e){u.forEach=i}}},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,r){"use strict";var n=r(63).forEach,o=r(62);e.exports=o("forEach")?function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}:[].forEach},function(e,t,r){"use strict";r(32);var n=1e3,o=60*n,i=60*o,s=24*i,a=7*s,c=365.25*s;function u(e,t,r,n){var o=t>=1.5*r;return Math.round(e/r)+" "+n+(o?"s":"")}e.exports=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\-?\d?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return;var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*c;case"weeks":case"week":case"w":return r*a;case"days":case"day":case"d":return r*s;case"hours":case"hour":case"hrs":case"hr":case"h":return r*i;case"minutes":case"minute":case"mins":case"min":case"m":return r*o;case"seconds":case"second":case"secs":case"sec":case"s":return r*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}(e);if("number"===r&&!1===isNaN(e))return t.long?function(e){var t=Math.abs(e);if(t>=s)return u(e,t,s,"day");if(t>=i)return u(e,t,i,"hour");if(t>=o)return u(e,t,o,"minute");if(t>=n)return u(e,t,n,"second");return e+" ms"}(e):function(e){var t=Math.abs(e);if(t>=s)return Math.round(e/s)+"d";if(t>=i)return Math.round(e/i)+"h";if(t>=o)return Math.round(e/o)+"m";if(t>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={expired:"Session expired! Please re-launch the app",noScopeForId:"Trying to get the ID of the selected %s. Please add 'launch' or 'launch/%s' to the requested scopes and try again.",noIfNoAuth:"You are trying to get %s but the app is not authorized yet.",noFreeContext:"Please don't use open fhir servers if you need to access launch context items like the %S."}}]);
//# sourceMappingURL=fhir-client.min.js.map